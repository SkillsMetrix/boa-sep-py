

- name: check the background of remote machine
  apt:
    update_cache: true
    cache_valid_time: 3600

- name: Gather OS Info
  setup:
    gather_subset:
      - "os_family"

- name: print os Information
  debug:
    msg: "the remote os is {{ansible_os_family}}"
  




---------

- name: install apache to the remote machine
  apt:
    name:
      - apache2
    state: latest

- name: check the status of installation
  command: systemctl status apache2
  register: apache_status

- name: print the status
  debug:
    msg: "{{apache_status.stdout}}"


---

- hosts: db
  become: true

  pre_tasks:
    - name: load it before Main
      import_tasks: pretask.yaml
  
  tasks:
    - name: call main tasks
      import_tasks: posttask.yaml

